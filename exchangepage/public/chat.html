<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="utf-8" />
  <base href="/exchangepage/public/">
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>แชท | THAMMUE</title>
  <link rel="stylesheet" href="../css/instyle.css" />
  <link rel="stylesheet" href="../css/style.css" />
  <link rel="stylesheet" href="../css/chat.css" />
</head>

<body>
  <!-- Topbar -->
  <ul class="top-nav">
    <li><a href="upload.html">อัพโหลดสินค้าแลกเปลี่ยน</a></li>
    <li><span class="top-divider">|</span></li>
    <li><a href="index.html">ซื้อสินค้า</a></li>
    <li class="right">
      <a id="notiBtn" href="notifications.html">แจ้งเตือน <span id="notiBadge" hidden class="badge"></span></a>
    </li>
    <li><span class="top-divider">|</span></li>
    <li><a href="#help">ช่วยเหลือ</a></li>
  </ul>

  <!-- Header -->
  <div class="header-wrapper">
    <div class="logo-container"><a href="index.html" class="brand-text">THAMMUE</a></div>
    <div class="search-container">
      <div class="search-group">
        <input type="text" placeholder="ค้นหาสินค้า" />
        <button class="search-button" aria-label="ค้นหา">
          <img src="../img/Icon/search.png" alt="ค้นหา" />
        </button>
      </div>
      <div class="icon-buttons">
        <a class="action-button" href="request.html"><img src="../img/Icon/exchange.png" alt=""></a>
        <a class="action-button" href="fav.html"><img src="../img/Icon/heart.png" alt=""></a>
        <a class="action-button" href="chat.html"><img src="../img/Icon/chat.png" alt=""></a>
        <a class="action-button" href="profile.html"><img src="../img/Icon/user.png" alt=""></a>
      </div>
    </div>
  </div>

  <!-- Categories (ลิงก์แบบเดียวกับทุกหน้า) -->
  <div class="category-buttons">
    <a href="category.html?category_id=1" class="category-button">แฮนเมด</a>
    <a href="category.html?category_id=2" class="category-button">ของประดิษฐ์</a>
    <a href="category.html?category_id=3" class="category-button">ของใช้ทั่วไป</a>
    <a href="category.html?category_id=4" class="category-button">เสื้อผ้า</a>
    <a href="category.html?category_id=5" class="category-button">หนังสือ</a>
    <a href="category.html?category_id=6" class="category-button">ของสะสม</a>
  </div>

  <div class="chat-wrap">
    <div class="chat-grid">
      <!-- List (left) -->
      <aside class="chat-list">
        <div class="chat-list-head">ห้องแชทของฉัน</div>
        <ul id="convList">
          <li class="hint">กำลังโหลด...</li>
        </ul>
      </aside>

      <!-- Box (right) -->
      <section class="chat-box">
        <div class="chat-box-head">
          <div id="chatHead">เลือกห้องจากด้านซ้ายเพื่อเริ่มคุย</div>
        </div>
        <div id="msgs" class="chat-msgs">
          <div class="msg you">สวัสดี! เลือกห้องทางซ้ายเพื่อเริ่มสนทนา</div>
        </div>
        <div class="chat-input">
          <textarea id="input" placeholder="พิมพ์ข้อความ..." disabled></textarea>
          <button id="sendBtn" disabled>ส่ง</button>
        </div>
      </section>
    </div>
  </div>

  <script>
    // ประกาศ API_BASE แบบ global กันชนกับไฟล์อื่น
    window.API_BASE = window.API_BASE || '/exchangepage/api';
    /* ที่เหลือใช้สคริปต์เดิมของคุณต่อได้เลย เช่นเปิด socket / polling ฯลฯ */
  </script>
  <script src="../js/app-badges.js?v=chat" defer></script>
  <script src="../js/header-noti.js"></script>
</body>
</html>
