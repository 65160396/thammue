<!DOCTYPE html>
<html lang="th">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Thammue</title>
    <link rel="stylesheet" href="/css/style.css" />
    <link rel="stylesheet" href="/css/instyle.css" />
  </head>

  <body>
    <!-- แถบบนสุด -->
    <ul class="top-nav">
      <!-- ซ้าย -->
      <li><a href="/exchangepage/index.html">แลกเปลี่ยนสินค้า</a></li>
      <li><span class="top-divider">|</span></li>
      <li><a id="openOrMyShop"
          href="/page/open_a_shop.html">เปิดร้านค้า</a></li>

      <!-- ขวา -->
      <li class="right"><a href="#notification">แจ้งเตือน</a></li>
      <li><span class="top-divider">|</span></li>
      <li><a href="#help">ช่วยเหลือ</a></li>
      <li><span class="top-divider">|</span></li>
      <li><a href="#lang">ไทย</a></li>
    </ul>

    <!-- Header หลัก -->
    <div class="header-wrapper">
      <div class="logo-container">
        <a href="/page/main.html" class="brand-text">THAMMUE</a>
      </div>

      <div class="search-container">
        <div class="search-group">
          <input type="text" placeholder="ค้นหาสินค้า" />
          <button class="search-button" aria-label="ค้นหา">
            <img src="/img/Icon/search.png" alt="ค้นหา" />
          </button>
        </div>

        <div class="icon-buttons">

          <a class="action-button" href="/page/favorites/index.php"
            aria-label="รายการโปรด">
            <img src="/img/Icon/heart.png" alt="รายการโปรด">
            <span id="favBadge" class="icon-badge" hidden>0</span>
          </a>

          <button class="action-button"><img
              src="/img/Icon/shopping-cart.png"
              alt="ตะกร้า" /></button>
          <button class="action-button"><img src="/img/Icon/chat.png"
              alt="แชท" /></button>

          <!-- ▼ โปรไฟล์ + ชื่อ + เมนูดรอปดาวน์ -->
          <div class="user-menu" id="userMenu">
            <!---กล่องรวมปุ่มโปรไฟล์ + เมนูดรอปดาวน์ -->

            <button class="user-area" id="userArea" aria-haspopup="true"
              aria-expanded="false"> <!---userArea ที่ไว้ เปิด ปิดเมนู-->

              <img src="/img/Icon/user.png" alt="โปรไฟล์" />
              <span class="user-chip" id="userChip" hidden></span>
              <!---userChip ที่ไว้โชว์ชื่อผู้ใช้-->
              <svg class="chev" viewBox="0 0 20 20" aria-hidden="true">
                <!---ตัวเลขเป็นพิกัดวาดรูปลูกศร ชี้ลง-->
                <path d="M5.5 7.5l4.5 4 4.5-4" fill="none"
                  stroke="currentColor" stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round" />
              </svg>
            </button>

            <div class="user-dropdown" id="userDropdown"
              role="menu">
              <!-- JS จะเติมรายการให้หลังจาก login/logout -->
            </div>
          </div>
        </div>

      </div>
    </div>

    <div id="flash" class="flash"
      style="display:none;padding:12px;border-radius:8px;margin:12px 0;font-size:14px"></div>

    <div class="category-buttons">
      <a href="/page/category/handmade.html"
        class="category-button">สินค้าแฮนเมด</a>
      <a href="/page/category/jewelry.html"
        class="category-button">เครื่องประดับ</a>
      <a href="/page/category/local_products.html"
        class="category-button">สินค้าท้องถิ่น</a>
      <a href="/page/category/second_hand.html"
        class="category-button">สินค้ามือสอง</a>
    </div>

    <div class="ad-banner">
      <img src="/img/Illustration/โฆษณา.jpg" alt="โฆษณา" />
    </div>

    <!-- แนะนำสำหรับคุณ -->
    <div class="recommended-products">
      <h2>แนะนำสำหรับคุณ</h2>
      <div class="product-grid">
        <!-- ... การ์ดสินค้าเดิมของคุณ ... -->
      </div>
    </div>

    <script src="/js/nav-active.js"></script>
    <script src="/js/flashmessage.js"></script>
    <!--แสดง flash message ชั่วคราวจากพารามิเตอร์-->
    <script src="/js/me.js"></script> <!--ดึงสถานะผู้ใช้-->
    <script src="/js/user-menu.js"></script> <!--จัดการเมนูโปรไฟล์-->

    <script src="/js/store/shop-toggle.js"></script>
    <script>
  document.addEventListener('DOMContentLoaded', () => {
    toggleOpenOrMyShop(); // จะสลับเป็น “ร้านของฉัน” อัตโนมัติถ้ามีร้านแล้ว
  });
</script>
    <script src="/js/productsforsale/products.js"></script>
    <script>
  document.addEventListener('DOMContentLoaded', () => {
    renderProducts({
      endpoint: '/page/backend/productsforsale/get_products.php'
    });
  });
</script>

    <script src="/js/fav-badge.js" defer></script>

  </body>
</html>
