<!DOCTYPE html>
<html lang="th">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Thammue | ‡∏£‡πâ‡∏≤‡∏ô‡∏Ñ‡πâ‡∏≤</title>
        <link rel="stylesheet" href="/css/style.css" />
    </head>

    <body>
        <!-- ‡πÅ‡∏ñ‡∏ö‡∏ö‡∏ô‡∏™‡∏∏‡∏î -->
        <ul class="top-nav">
            <!-- ‡∏ã‡πâ‡∏≤‡∏¢ -->
            <li><a href="/page/storepage/store.html">‡∏£‡πâ‡∏≤‡∏ô‡∏Ñ‡πâ‡∏≤</a></li>
            <li><span class="top-divider">|</span></li>
            <li><a href="/page/login.html">‡∏ã‡∏∑‡πâ‡∏≠‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</a></li>

            <!-- ‡∏Ç‡∏ß‡∏≤ -->
            <li class="right"><a href="#notification">‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô</a></li>
            <li><span class="top-divider">|</span></li>
            <li><a href="#help">‡∏ä‡πà‡∏ß‡∏¢‡πÄ‡∏´‡∏•‡∏∑‡∏≠</a></li>
            <li><span class="top-divider">|</span></li>
            <li><a href="#lang">‡πÑ‡∏ó‡∏¢</a></li>
        </ul>

        <!-- Header ‡∏´‡∏•‡∏±‡∏Å -->
        <div class="header-wrapper">
            <div class="logo-container">
                <a href="/page/index.html" class="brand-text">THAMMUE</a>
            </div>

            <div class="search-container">
                <div class="icon-buttons">
                    <button class="action-button"><img src="/img/Icon/chat.png"
                            alt="‡πÅ‡∏ä‡∏ó" /></button>
                </div>
                <!-- ‚ñº ‡πÇ‡∏õ‡∏£‡πÑ‡∏ü‡∏•‡πå + ‡∏ä‡∏∑‡πà‡∏≠ + ‡πÄ‡∏°‡∏ô‡∏π‡∏î‡∏£‡∏≠‡∏õ‡∏î‡∏≤‡∏ß‡∏ô‡πå -->
                <div class="user-menu" id="userMenu">
                    <!---‡∏Å‡∏•‡πà‡∏≠‡∏á‡∏£‡∏ß‡∏°‡∏õ‡∏∏‡πà‡∏°‡πÇ‡∏õ‡∏£‡πÑ‡∏ü‡∏•‡πå + ‡πÄ‡∏°‡∏ô‡∏π‡∏î‡∏£‡∏≠‡∏õ‡∏î‡∏≤‡∏ß‡∏ô‡πå -->

                    <button class="user-area" id="userArea" aria-haspopup="true"
                        aria-expanded="false">
                        <!---userArea ‡∏ó‡∏µ‡πà‡πÑ‡∏ß‡πâ ‡πÄ‡∏õ‡∏¥‡∏î ‡∏õ‡∏¥‡∏î‡πÄ‡∏°‡∏ô‡∏π-->

                        <img src="/img/Icon/user.png" alt="‡πÇ‡∏õ‡∏£‡πÑ‡∏ü‡∏•‡πå" />
                        <span class="user-chip" id="userChip" hidden></span>
                        <!---userChip ‡∏ó‡∏µ‡πà‡πÑ‡∏ß‡πâ‡πÇ‡∏ä‡∏ß‡πå‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ-->
                        <svg class="chev" viewBox="0 0 20 20"
                            aria-hidden="true">
                            <!---‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏Ç‡πÄ‡∏õ‡πá‡∏ô‡∏û‡∏¥‡∏Å‡∏±‡∏î‡∏ß‡∏≤‡∏î‡∏£‡∏π‡∏õ‡∏•‡∏π‡∏Å‡∏®‡∏£ ‡∏ä‡∏µ‡πâ‡∏•‡∏á-->
                            <path d="M5.5 7.5l4.5 4 4.5-4" fill="none"
                                stroke="currentColor" stroke-width="2"
                                stroke-linecap="round"
                                stroke-linejoin="round" />
                        </svg>
                    </button>

                    <div class="user-dropdown" id="userDropdown"
                        role="menu">
                        <!-- JS ‡∏à‡∏∞‡πÄ‡∏ï‡∏¥‡∏°‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÉ‡∏´‡πâ‡∏´‡∏•‡∏±‡∏á‡∏à‡∏≤‡∏Å login/logout -->
                    </div>
                </div>
            </div>
        </div>

        <!-- ===== Store section ===== -->
        <section class="store-wrap">
            <div class="store-head">
                <div class="store-sub" id="shopMeta"></div>
            </div>

            <div class="store-actions">
                <a class="btn btn-gray" id="btnStoreInfo"
                    href="#">‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏£‡πâ‡∏≤‡∏ô‡∏Ñ‡πâ‡∏≤</a>
                <a class="btn btn-black" id="btnUpload"
                    href="#">‡∏≠‡∏±‡∏û‡πÇ‡∏´‡∏•‡∏î‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</a>
            </div>
        </section>

        <script>
(function () {
  //‡∏î‡∏∂‡∏á path ‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô‡∏à‡∏≤‡∏Å URL"
  var path = location.pathname.replace(/\/+/g,'/').toLowerCase();
  document.querySelectorAll('.category-buttons a.category-button').forEach(function (a) {
    var href = a.getAttribute('href').replace(/\/+/g,'/').toLowerCase();
    if (path.endsWith(href)) {
      // 5. ‡πÄ‡∏ï‡∏¥‡∏° class "active" ‡πÉ‡∏´‡πâ‡∏õ‡∏∏‡πà‡∏°‡∏ô‡∏±‡πâ‡∏ô
      a.classList.add('active');
    }
  });
})();
</script>

        <!-- Footer -->
        <footer class="footer">
            <div class="container footer-grid">
                <div>
                    <h5>‡πÄ‡∏£‡∏≤‡∏ó‡∏≥‡πÄ‡∏û‡∏∑‡πà‡∏≠</h5>
                    <p class="muted">
                        <li>‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà‡∏Ñ‡∏∑‡∏≠‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡πÅ‡∏ö‡πà‡∏á‡∏õ‡∏±‡∏ô ‡πÅ‡∏•‡∏Å‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô</li>
                        <li>‡πÅ‡∏•‡∏∞‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ñ‡∏∏‡∏ì‡∏Ñ‡πà‡∏≤‡πÉ‡∏´‡∏°‡πà‡πÉ‡∏´‡πâ‡∏Å‡∏±‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏°‡∏∑‡∏≠‡∏™‡∏≠‡∏á</li>
                        <li>‡∏á‡∏≤‡∏ô‡πÅ‡∏Æ‡∏ô‡πÄ‡∏°‡∏î‡πÅ‡∏•‡∏∞‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ó‡πâ‡∏≠‡∏á‡∏ñ‡∏¥‡πà‡∏ô‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡∏ó‡∏∏‡∏Å‡∏ä‡∏¥‡πâ‡∏ô</li>
                        <li>‡∏°‡∏µ‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏£‡∏≤‡∏ß‡πÅ‡∏•‡∏∞‡∏ä‡∏µ‡∏ß‡∏¥‡∏ï‡πÉ‡∏´‡∏°‡πà‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á</li>
                    </p>
                </div>
                <div>
                    <h5>‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞</h5>
                    <ul class="list">
                        <li><a href="#">‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏Å‡∏≤‡∏£‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠</a></li>
                        <li><a href="#">‡∏™‡πà‡∏á‡∏Ñ‡∏∑‡∏ô</a></li>
                        <li><a href="#">‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠</a></li>
                        <li><a href="#">‡∏Å‡∏≤‡∏£‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô</a></li>
                        <li><a href="#">‡∏Ñ‡∏π‡∏õ‡∏≠‡∏á‡∏Ç‡∏≠‡∏á‡∏â‡∏±‡∏ô</a></li>
                        <li><a href="#">‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏™‡πà‡∏á</a></li>
                    </ul>
                </div>
                <div>
                    <h5>SUBSCRIBE</h5>
                    <form class="subscribe" action="#" method="post">
                        <input type="email" placeholder="‡∏≠‡∏µ‡πÄ‡∏°‡∏•‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì"
                            required />
                        <button type="submit"
                            class="btn btn-sm">‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°‡∏Ç‡πà‡∏≤‡∏ß</button>
                    </form>
                    <div class="social">
                        <a href="#" aria-label="Facebook">üÑµ</a>
                        <a href="#" aria-label="Instagram">üÑ∏</a>
                        <a href="#" aria-label="YouTube">üÖà</a>
                        <a href="#" aria-label="Line">üÑª</a>
                    </div>
                </div>
            </div>
            <div class="container tiny muted center mt-24">
                copy¬©‡∏Ç‡∏≠‡∏ö‡∏Ñ‡∏∏‡∏ì‡∏ó‡∏∏‡∏Å‡∏Ñ‡∏ô‡πÉ‡∏ô‡∏ä‡∏∏‡∏°‡∏ä‡∏ô‡∏ó‡∏µ‡πà‡∏£‡πà‡∏ß‡∏°‡πÅ‡∏ö‡πà‡∏á‡∏õ‡∏±‡∏ô
            </div>
        </footer>

        <!-- ‡∏î‡∏∂‡∏á‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏à‡∏≤‡∏Å me.php ‡πÅ‡∏•‡∏∞‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡πÄ‡∏°‡∏ô‡∏π‡∏î‡∏£‡∏≠‡∏õ‡∏î‡∏≤‡∏ß‡∏ô‡πå -->
        <script>
      //‡∏î‡∏∂‡∏á‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏Ç‡πâ‡∏≤‡∏á‡πÑ‡∏≠‡∏Ñ‡∏≠‡∏ô‡∏à‡∏≤‡∏Å me.php
      (function () {
        const chip = document.getElementById('userChip');
        const userArea = document.getElementById('userArea');
        if (!chip || !userArea) return;

        fetch('/page/backend/me.php', { cache: 'no-store' })
          .then(r => r.ok ? r.json() : { ok:false })
          .then(d => {
            if (!d || !d.ok) { // ‡πÑ‡∏°‡πà‡∏•‡πá‡∏≠‡∏Å‡∏≠‡∏¥‡∏ô
              chip.hidden = true; //    ‡∏ã‡πà‡∏≠‡∏ô‡∏ä‡∏∑‡πà‡∏≠
              userArea.href = '/page/login.html';  // ‡∏Å‡∏î‡∏õ‡∏∏‡πà‡∏°‡πÇ‡∏õ‡∏£‡πÑ‡∏ü‡∏•‡πå‡πÅ‡∏•‡πâ‡∏ß‡∏û‡∏≤‡πÑ‡∏õ‡∏´‡∏ô‡πâ‡∏≤ login
              return;
            }
              //‡∏Å‡∏£‡∏ì‡∏µ ‚Äú‡∏•‡πá‡∏≠‡∏Å‡∏≠‡∏¥‡∏ô‡πÅ‡∏•‡πâ‡∏ß‚Äù
            const name = (d.user.display_name || d.user.name || '').trim();
            if (name) { 
              chip.textContent = name; // ‡πÄ‡∏ï‡∏¥‡∏°‡∏ä‡∏∑‡πà‡∏≠
              chip.hidden = false; }  // ‡πÇ‡∏ä‡∏ß‡πå‡∏ä‡∏∑‡πà‡∏≠
          })
          .catch(() => { chip.hidden = true; }); // ‡∏°‡∏µ error ‡∏Å‡πá‡∏ã‡πà‡∏≠‡∏ô‡∏ä‡∏∑‡πà‡∏≠‡πÑ‡∏ß‡πâ
      })();
    </script>

        <!---‡πÄ‡∏°‡∏ô‡∏π‡∏î‡∏£‡∏≠‡∏õ‡∏î‡∏≤‡∏ß‡∏ô‡πå ‡πÅ‡∏•‡∏∞‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°‡πÄ‡∏õ‡∏¥‡∏î/‡∏õ‡∏¥‡∏î---!-->
        <script>
(() => {
  const menu = document.getElementById('userMenu');
  const btn  = document.getElementById('userArea');
  const chip = document.getElementById('userChip');
  const dd   = document.getElementById('userDropdown');
  if (!menu || !btn || !chip || !dd) return;

  // ‡∏Ñ‡πà‡∏≤‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ú‡∏π‡πâ‡∏ó‡∏µ‡πà‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏•‡πá‡∏≠‡∏Å‡∏≠‡∏¥‡∏ô
  dd.innerHTML = `
    <a href="/page/login.html" role="menuitem">‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö</a>
    <a href="/page/add_member.html" role="menuitem">‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å</a>
  `;

  // ‡∏î‡∏∂‡∏á‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏à‡∏≤‡∏Å PHP
  fetch('/page/backend/me.php', { cache:'no-store' })
    .then(r => r.ok ? r.json() : {ok:false})
    .then(d => {
      if (d && d.ok) {
        const name = (d.user.display_name || d.user.name || '').trim();
        if (name) { chip.textContent = name; chip.hidden = false; }
        dd.innerHTML = `
          <a href="/page/profile.html" role="menuitem">‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡∏Ç‡∏≠‡∏á‡∏â‡∏±‡∏ô</a>
          <a href="/page/my_order.html" role="menuitem">‡∏Å‡∏≤‡∏£‡∏ã‡∏∑‡πâ‡∏≠‡∏Ç‡∏≠‡∏á‡∏â‡∏±‡∏ô</a>
          <a href="/page/change_password.html" role="menuitem">‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô</a>
          <hr>
          <a href="/page/backend/logout.php" role="menuitem" class="logout">‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö</a>
        `;
      } else {
        chip.hidden = true; // guest
      }
    })
    .catch(() => { chip.hidden = true; });

  // ‡πÄ‡∏õ‡∏¥‡∏î/‡∏õ‡∏¥‡∏î‡∏î‡πâ‡∏ß‡∏¢‡∏Ñ‡∏•‡∏¥‡∏Å (‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏°‡∏∑‡∏≠‡∏ñ‡∏∑‡∏≠)
  btn.addEventListener('click', e => {
    e.preventDefault();
    const open = menu.classList.toggle('open');
    btn.setAttribute('aria-expanded', open);
  });

  // ‡∏õ‡∏¥‡∏î‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏Ñ‡∏•‡∏¥‡∏Å‡∏Ç‡πâ‡∏≤‡∏á‡∏ô‡∏≠‡∏Å‡∏´‡∏£‡∏∑‡∏≠‡∏Å‡∏î Esc
  document.addEventListener('click', e => {
    if (!menu.contains(e.target)) { menu.classList.remove('open'); btn.setAttribute('aria-expanded','false'); }
  });
  document.addEventListener('keydown', e => {
    if (e.key === 'Escape') { menu.classList.remove('open'); btn.setAttribute('aria-expanded','false'); btn.blur(); }
  });
})();
</script>

        <script>
/**
 * ‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏£‡πâ‡∏≤‡∏ô‡∏à‡∏≤‡∏Å PHP ‡πÅ‡∏•‡πâ‡∏ß‡πÄ‡∏ï‡∏¥‡∏°‡∏ä‡∏∑‡πà‡∏≠/‡∏•‡∏¥‡∏á‡∏Å‡πå‡πÉ‡∏´‡πâ‡∏õ‡∏∏‡πà‡∏°
 * ‡∏õ‡∏£‡∏±‡∏ö ENDPOINT ‡πÉ‡∏´‡πâ‡∏ï‡∏£‡∏á‡∏Å‡∏±‡∏ö‡∏ù‡∏±‡πà‡∏á‡πÅ‡∏ö‡πá‡∏Å‡πÄ‡∏≠‡∏ô‡∏î‡πå‡∏Ñ‡∏∏‡∏ì‡πÑ‡∏î‡πâ
 * ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡∏µ‡πâ‡πÉ‡∏ä‡πâ /page/backend/get_shop.php
 */
(function () {
  const ENDPOINT = '/page/backend/get_shop.php';  // << ‡∏õ‡∏£‡∏±‡∏ö‡πÑ‡∏î‡πâ
  const $name = document.getElementById('shopName');
  const $meta = document.getElementById('shopMeta');
  const $btnInfo = document.getElementById('btnStoreInfo');
  const $btnUpload = document.getElementById('btnUpload');

  if (!$name || !$btnInfo || !$btnUpload) return;

  fetch(ENDPOINT, { credentials: 'include', cache: 'no-store' })
    .then(r => {
      if (r.status === 401) {
        // ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏•‡πá‡∏≠‡∏Å‡∏≠‡∏¥‡∏ô ‚Üí ‡∏û‡∏≤‡πÑ‡∏õ‡∏´‡∏ô‡πâ‡∏≤ login
        location.href = '/page/login.html';
        return Promise.reject();
      }
      return r.json();
    })
    .then(d => {
      // ‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡∏Ñ‡∏≤‡∏î‡∏´‡∏ß‡∏±‡∏á:
      // { user_id: 2, shop_id: 1, shop_name: "‡∏ô‡∏∏‡πà‡∏ô‡∏ô‡∏∏‡πà‡∏ô‡∏ô‡∏∏‡πà‡∏ô" }
      if (!d || !d.shop_id) {
        // ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏£‡πâ‡∏≤‡∏ô ‚Üí ‡∏û‡∏≤‡πÑ‡∏õ‡πÄ‡∏õ‡∏¥‡∏î‡∏£‡πâ‡∏≤‡∏ô
        location.href = '/page/open-shop.html'; // ‡∏õ‡∏£‡∏±‡∏ö‡∏•‡∏¥‡∏á‡∏Å‡πå‡πÑ‡∏î‡πâ
        return;
      }

      $name.textContent = d.shop_name || '‡∏£‡πâ‡∏≤‡∏ô‡∏Ñ‡πâ‡∏≤‡∏Ç‡∏≠‡∏á‡∏â‡∏±‡∏ô';
      $meta.textContent = `‡∏£‡∏´‡∏±‡∏™‡∏£‡πâ‡∏≤‡∏ô #${d.shop_id} ‚Ä¢ ‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ #${d.user_id}`;

      // ‡∏ú‡∏π‡∏Å‡∏•‡∏¥‡∏á‡∏Å‡πå‡πÑ‡∏õ‡∏´‡∏ô‡πâ‡∏≤‡∏≠‡∏∑‡πà‡∏ô ‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏™‡πà‡∏á shop_id ‡πÑ‡∏õ‡∏î‡πâ‡∏ß‡∏¢
      $btnInfo.href   = `/page/storepage/store-info.php?shop_id=${encodeURIComponent(d.shop_id)}`;
      $btnUpload.href = `/exchangepage/Upload.html?shop_id=${encodeURIComponent(d.shop_id)}`;
    })
    .catch(() => {
      if ($name) $name.textContent = '‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏£‡πâ‡∏≤‡∏ô';
    });
})();
</script>

    </body>
</html>
